<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R style guide</title>
  <meta name="description" content="R style guide">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R style guide" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R style guide" />
  
  
  

<meta name="author" content="">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="settings/dq-icon-or-rgb.svg" type="image/x-icon">
<link rel="prev" href="index.html">
<link rel="next" href="Syntax.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="settings/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<p style="margin-top: 0.2cm; margin-bottom: 0.1cm;">&nbsp; &nbsp; <img src="daqana-or-rgb.svg" width="180"> R style guide</p>

<li class="divider"></li>
<li><a href="index.html#section"></a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#lintr-and-styler"><i class="fa fa-check"></i>lintr and styler</a></li>
</ul></li>
<li class="part"><span><b>I Analyses</b></span></li>
<li class="chapter" data-level="1" data-path="files.html"><a href="files.html"><i class="fa fa-check"></i><b>1</b> Files</a><ul>
<li class="chapter" data-level="1.1" data-path="files.html"><a href="files.html#names"><i class="fa fa-check"></i><b>1.1</b> Names</a></li>
<li class="chapter" data-level="1.2" data-path="files.html"><a href="files.html#paths"><i class="fa fa-check"></i><b>1.2</b> Paths</a></li>
<li class="chapter" data-level="1.3" data-path="files.html"><a href="files.html#structure"><i class="fa fa-check"></i><b>1.3</b> Structure</a></li>
<li class="chapter" data-level="1.4" data-path="files.html"><a href="files.html#cleaning-up"><i class="fa fa-check"></i><b>1.4</b> Cleaning up</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Syntax.html"><a href="Syntax.html"><i class="fa fa-check"></i><b>2</b> Syntax</a><ul>
<li class="chapter" data-level="2.1" data-path="Syntax.html"><a href="Syntax.html#object-names"><i class="fa fa-check"></i><b>2.1</b> Object names</a></li>
<li class="chapter" data-level="2.2" data-path="Syntax.html"><a href="Syntax.html#spacing"><i class="fa fa-check"></i><b>2.2</b> Spacing</a></li>
<li class="chapter" data-level="2.3" data-path="Syntax.html"><a href="Syntax.html#Indenting"><i class="fa fa-check"></i><b>2.3</b> Indenting</a></li>
<li class="chapter" data-level="2.4" data-path="Syntax.html"><a href="Syntax.html#long-lines"><i class="fa fa-check"></i><b>2.4</b> Long lines</a></li>
<li class="chapter" data-level="2.5" data-path="Syntax.html"><a href="Syntax.html#assignment"><i class="fa fa-check"></i><b>2.5</b> Assignment</a></li>
<li class="chapter" data-level="2.6" data-path="Syntax.html"><a href="Syntax.html#semicolons"><i class="fa fa-check"></i><b>2.6</b> Semicolons</a></li>
<li class="chapter" data-level="2.7" data-path="Syntax.html"><a href="Syntax.html#quotes"><i class="fa fa-check"></i><b>2.7</b> Quotes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>3</b> Functions</a><ul>
<li class="chapter" data-level="3.1" data-path="functions.html"><a href="functions.html#naming"><i class="fa fa-check"></i><b>3.1</b> Naming</a></li>
<li class="chapter" data-level="3.2" data-path="functions.html"><a href="functions.html#function-head-body"><i class="fa fa-check"></i><b>3.2</b> Head and body</a></li>
<li class="chapter" data-level="3.3" data-path="functions.html"><a href="functions.html#argument-names"><i class="fa fa-check"></i><b>3.3</b> Argument names</a></li>
<li class="chapter" data-level="3.4" data-path="functions.html"><a href="functions.html#return"><i class="fa fa-check"></i><b>3.4</b> <code>return()</code></a></li>
<li class="chapter" data-level="3.5" data-path="functions.html"><a href="functions.html#comments"><i class="fa fa-check"></i><b>3.5</b> Comments</a></li>
<li class="chapter" data-level="3.6" data-path="functions.html"><a href="functions.html#design"><i class="fa fa-check"></i><b>3.6</b> Design</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipes.html"><a href="pipes.html"><i class="fa fa-check"></i><b>4</b> Pipes</a><ul>
<li class="chapter" data-level="" data-path="pipes.html"><a href="pipes.html#please-note"><i class="fa fa-check"></i>Please note</a></li>
<li class="chapter" data-level="4.1" data-path="pipes.html"><a href="pipes.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="pipes.html"><a href="pipes.html#spacing-and-indenting"><i class="fa fa-check"></i><b>4.2</b> Spacing and indenting</a></li>
<li class="chapter" data-level="4.3" data-path="pipes.html"><a href="pipes.html#no-arguments"><i class="fa fa-check"></i><b>4.3</b> No arguments</a></li>
<li class="chapter" data-level="4.4" data-path="pipes.html"><a href="pipes.html#long-lines-1"><i class="fa fa-check"></i><b>4.4</b> Long lines</a></li>
<li class="chapter" data-level="4.5" data-path="pipes.html"><a href="pipes.html#assignment-1"><i class="fa fa-check"></i><b>4.5</b> Assignment</a></li>
</ul></li>
<li class="part"><span><b>II Packages</b></span></li>
<li class="chapter" data-level="5" data-path="help-pages.html"><a href="help-pages.html"><i class="fa fa-check"></i><b>5</b> Help Pages</a><ul>
<li class="chapter" data-level="5.1" data-path="help-pages.html"><a href="help-pages.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="help-pages.html"><a href="help-pages.html#title-and-description"><i class="fa fa-check"></i><b>5.2</b> Title and Description</a></li>
<li class="chapter" data-level="5.3" data-path="help-pages.html"><a href="help-pages.html#indention"><i class="fa fa-check"></i><b>5.3</b> Indention</a></li>
<li class="chapter" data-level="5.4" data-path="help-pages.html"><a href="help-pages.html#documenting-parameters"><i class="fa fa-check"></i><b>5.4</b> Documenting Parameters</a></li>
<li class="chapter" data-level="5.5" data-path="help-pages.html"><a href="help-pages.html#capitalization-and-full-stops"><i class="fa fa-check"></i><b>5.5</b> Capitalization and Full Stops</a></li>
<li class="chapter" data-level="5.6" data-path="help-pages.html"><a href="help-pages.html#reference"><i class="fa fa-check"></i><b>5.6</b> Reference</a></li>
<li class="chapter" data-level="5.7" data-path="help-pages.html"><a href="help-pages.html#line-break"><i class="fa fa-check"></i><b>5.7</b> Line Break</a></li>
<li class="chapter" data-level="5.8" data-path="help-pages.html"><a href="help-pages.html#code-font"><i class="fa fa-check"></i><b>5.8</b> Code Font</a></li>
<li class="chapter" data-level="5.9" data-path="help-pages.html"><a href="help-pages.html#internal-functions"><i class="fa fa-check"></i><b>5.9</b> Internal Functions</a></li>
<li class="chapter" data-level="5.10" data-path="help-pages.html"><a href="help-pages.html#deprecating-functions"><i class="fa fa-check"></i><b>5.10</b> Deprecating Functions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="unit-tests.html"><a href="unit-tests.html"><i class="fa fa-check"></i><b>6</b> Unit Tests</a><ul>
<li class="chapter" data-level="6.1" data-path="unit-tests.html"><a href="unit-tests.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="unit-tests.html"><a href="unit-tests.html#file-names"><i class="fa fa-check"></i><b>6.2</b> File names</a></li>
<li class="chapter" data-level="6.3" data-path="unit-tests.html"><a href="unit-tests.html#structure-1"><i class="fa fa-check"></i><b>6.3</b> Structure</a></li>
<li class="chapter" data-level="6.4" data-path="unit-tests.html"><a href="unit-tests.html#context"><i class="fa fa-check"></i><b>6.4</b> Context</a></li>
<li class="chapter" data-level="6.5" data-path="unit-tests.html"><a href="unit-tests.html#property-test"><i class="fa fa-check"></i><b>6.5</b> Property test</a></li>
<li class="chapter" data-level="" data-path="unit-tests.html"><a href="unit-tests.html#lintr"><i class="fa fa-check"></i>lintr</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="error-messages.html"><a href="error-messages.html"><i class="fa fa-check"></i><b>7</b> Error messages</a><ul>
<li class="chapter" data-level="7.1" data-path="error-messages.html"><a href="error-messages.html#problem-statement"><i class="fa fa-check"></i><b>7.1</b> Problem statement</a></li>
<li class="chapter" data-level="7.2" data-path="error-messages.html"><a href="error-messages.html#error-location"><i class="fa fa-check"></i><b>7.2</b> Error location</a></li>
<li class="chapter" data-level="7.3" data-path="error-messages.html"><a href="error-messages.html#hints"><i class="fa fa-check"></i><b>7.3</b> Hints</a></li>
<li class="chapter" data-level="7.4" data-path="error-messages.html"><a href="error-messages.html#grammar"><i class="fa fa-check"></i><b>7.4</b> Grammar</a></li>
<li class="chapter" data-level="7.5" data-path="error-messages.html"><a href="error-messages.html#examples"><i class="fa fa-check"></i><b>7.5</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="news.html"><a href="news.html"><i class="fa fa-check"></i><b>8</b> News</a><ul>
<li class="chapter" data-level="8.1" data-path="news.html"><a href="news.html#news-bullets"><i class="fa fa-check"></i><b>8.1</b> News bullets</a><ul>
<li class="chapter" data-level="8.1.1" data-path="news.html"><a href="news.html#general-style"><i class="fa fa-check"></i><b>8.1.1</b> General style</a></li>
<li class="chapter" data-level="8.1.2" data-path="news.html"><a href="news.html#common-patterns"><i class="fa fa-check"></i><b>8.1.2</b> Common patterns</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="news.html"><a href="news.html#organisation"><i class="fa fa-check"></i><b>8.2</b> Organisation</a><ul>
<li class="chapter" data-level="8.2.1" data-path="news.html"><a href="news.html#breaking-changes"><i class="fa fa-check"></i><b>8.2.1</b> Breaking changes</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="news.html"><a href="news.html#blog-post"><i class="fa fa-check"></i><b>8.3</b> Blog post</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Built with bookdown</a></li>
<li><a href="https://github.com/tidyverse/style" target="blank">Based on the tidyverse R Style Guide</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R style guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="files" class="section level1">
<h1><span class="header-section-number">1</span> Files</h1>
<hr />
<div id="names" class="section level2">
<h2><span class="header-section-number">1.1</span> Names</h2>
<p>File names should be meaningful and end in <code>.R</code>. Avoid using special characters
in file names - stick with numbers, letters, <code>-</code>, and <code>_</code>.</p>
<div class="good">
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">fit_models.R</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">utility_functions.R</a></code></pre></div>
</div>
<div class="bad">
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Bad</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">fit models.R</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">foo.r</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">stuff.r</a></code></pre></div>
</div>
<p>If files should be run in a particular order, prefix them with numbers. If it
seems likely you’ll have more than 10 files, left pad with zero:</p>
<div class="good">
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="dv">00</span>_download.R</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="dv">01</span>_explore.R</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">...</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="dv">09</span>_model.R</a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="dv">10</span>_visualize.R</a></code></pre></div>
</div>
<p>If you later realise that you’ve missed some steps, it’s tempting to use <code>02a</code>,
<code>02b</code>, etc. However, it’s generally better to bite the bullet and
rename all files.</p>
<p>Pay attention to capitalization, since you, or some of your collaborators,
might be using an operating system with a case-insensitive file system (e.g.,
Microsoft Windows or OS X) which can lead to problems with (case-sensitive)
revision control systems. Prefer file names that are all lower case, and never
have names that differ only in their capitalization.</p>
<hr />
</div>
<div id="paths" class="section level2">
<h2><span class="header-section-number">1.2</span> Paths</h2>
<p>When referring to files from within your script make sure not to use absolute paths.
For portability reasons build paths with the <code>file.path()</code> function.</p>
<div class="bad">
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Bad</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">&quot;/home/user/my_analysis_dir/data/survey_xy/my_data.csv&quot;</span></a></code></pre></div>
</div>
<div class="good">
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co"># you can check the working dir with getwd(), it should be set to your analysis dir</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="kw">file.path</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;survey_xy&quot;</span>, <span class="st">&quot;my_data.csv&quot;</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">survey_xy_dir &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;survey_xy&quot;</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="kw">file.path</span>(survey_xy_dir, <span class="st">&quot;my_data.csv&quot;</span>)</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="kw">file.path</span>(survey_xy_dir, <span class="st">&quot;my_other_data.csv&quot;</span>)</a></code></pre></div>
</div>
<ul>
<li>Linters <code>absolute_path_linter</code> and <code>nonportable_path_linter</code> can check file paths. We currently do not use them as in our experience they fail to detect absolute and nonportable paths. We might write our own linters for that purpose.</li>
</ul>
<hr />
</div>
<div id="structure" class="section level2">
<h2><span class="header-section-number">1.3</span> Structure</h2>
<p>Use commented lines of <code>-</code> (or <code>=</code>) to break up your file into easily readable
chunks. Be consistent.</p>
<div class="good">
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co"># Load data ===========================</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="kw">load</span>(<span class="st">&quot;my_data.RData&quot;</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co"># Plot data ===========================</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="kw">plot</span>(my_data<span class="op">$</span>height <span class="op">~</span><span class="st"> </span>my_data<span class="op">$</span>age)</a></code></pre></div>
</div>
<div class="bad">
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># Bad</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co"># Load data ===========================</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="kw">load</span>(<span class="st">&quot;my_data.RData&quot;</span>)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#Plot data  -------------------------------------------------</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="kw">plot</span>(my_data<span class="op">$</span>height <span class="op">~</span><span class="st"> </span>my_data<span class="op">$</span>age)</a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#--------</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co"># do some other stuff</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="kw">summary</span>(my_data)</a></code></pre></div>
</div>
<p>In data analysis code, use comments to record important findings and analysis
decisions. If you need comments to explain what your code is doing, consider
rewriting your code to be clearer. If you discover that you have more comments
than code, consider switching to RMarkdown.</p>
<p>Start the script with a settings section sourcing and loading external files and packages and setting global variables and options. (With global we mean within your analysis or project, not R’s global options.) If you organize your project as a package (recommended) you can and should avoid <code>load()</code> and <code>source()</code>.
<code>source()</code> can be very helpful, though, for keeping reports and apps well-arranged when they grow larger.</p>
<div class="good">
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co"># -----------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co"># settings</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="kw">requireNamespace</span>(<span class="st">&quot;package_name&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="kw">load</span>(<span class="st">&quot;my_data.RData&quot;</span>)</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="kw">source</span>(<span class="st">&quot;helper_functions.R&quot;</span>)</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">my_red &lt;-<span class="st"> </span><span class="kw">rgb</span>(<span class="dv">229</span>, <span class="dv">29</span>, <span class="dv">41</span>, <span class="dt">maxColorValue =</span> <span class="dv">255</span>)</a>
<a class="sourceLine" id="cb13-10" data-line-number="10"></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co"># -----------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co"># data cleaning</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co"># ...</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co"># -----------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co"># data exploration</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="kw">summary</span>(my_cleaned_data)</a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="kw">plot</span>(my_cleaned_data<span class="op">$</span>height <span class="op">~</span><span class="st"> </span>my_cleaned_data<span class="op">$</span>age)</a>
<a class="sourceLine" id="cb13-21" data-line-number="21"></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="co"># -----------------------------------------------------------------------------</span></a></code></pre></div>
</div>
<p>If your script uses add-on packages, check their availability all at once at the very beginning of the file. This is more transparent than sprinkling <code>library()</code>
calls throughout your code or having hidden dependencies that are loaded in a
startup file, such as <code>.Rprofile</code>.</p>
<div class="good">
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">requireNamespace</span>(<span class="st">&quot;package_name&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="kw">requireNamespace</span>(<span class="st">&quot;another_package&quot;</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co"># at daqana -- thanks to our internal dqutils package -- you can also use</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">required_packages &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;package_name&quot;</span>, <span class="st">&quot;another_package&quot;</span>, <span class="st">&quot;yet_another_package&quot;</span>)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">dqutils<span class="op">::</span><span class="kw">requireNamespaces</span>(<span class="dt">packages =</span> required_packages, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<p>You could load all the packages via calls to <code>library()</code> or – as recommended – only check their availability via <code>requireNamespace()</code>, and refer to all non-base functions explicitly via <code>package::function()</code>.
The same function names might have been assigned in different packages with
almost certainly differing aims, scopes and implementations.
Using the <code>package::function()</code> format makes it explicit and rises awareness
of which function is meant to be used and which packages they belong to.
To use this format is also best practice within package code!</p>
<div class="good">
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">dplyr<span class="op">::</span><span class="kw">filter</span>(my_data, age <span class="op">&gt;</span><span class="st"> </span><span class="dv">16</span>)</a></code></pre></div>
</div>
<p>Omit the <code>package::</code> prefix only if you refer to a function from an <code>R</code> base
package like <code>stats</code> and <code>graphics</code>, which are typically loaded on start-up.</p>
<p>Make sure that a single file does not get too long. Organize different steps of
extensive analyses in separate files. Consider writing (helper) functions in
seperate files (and source them at the beginning of your script) or in a package
(and refer to them via <code>my_package::my_function()</code>).</p>
<hr />
</div>
<div id="cleaning-up" class="section level2">
<h2><span class="header-section-number">1.4</span> Cleaning up</h2>
<p>During the development of your analysis scripts or functions you will repeatedly comment and uncomment lines of your code and probably also add todo comments. Obviously, when you are done you should clean up.</p>
<ul>
<li>There are two linters which check that there are no remaining lines of commented code (outside roxygen blocks, cf. section <a href="help-pages.html#help-pages">5</a>) and search for customizable <em>todo</em> phrases: <code>commented_code_linter</code> and <code>todo_comment_linter</code> (the latter expecting the code phrase immediately after the comment character, e.g. <code># to do: ....</code>).</li>
</ul>
<p>Avoid unnecessary trailing white spaces. Though they won’t break your code as they might in other programming languages, you should still get rid of them even if only to save some otherwise unnecessarily required storage space. In order to avoid spurious commits in your version control system check for trailing white spaces already during development.</p>
<ul>
<li><p>In RStudio go to <em>Global Options &gt; Code &gt; Saving</em> and set <em>Strip trailing horizontal whitespace when saving</em>. It is applied to R scripts but not to Rmd scripts where trailing white spaces have their purpose (cf. <a href="https://github.com/rstudio/rstudio/commit/0db2515f38b10daeaf6314694355506fb7903feb">RStudio commit</a>). Alternatively, there is the <code>trailing_whitespace_linter</code> which spots all trailing white spaces regardless of file type.</p></li>
<li><p>You should also set <em>Ensure that source files end with newline</em>.</p></li>
</ul>
<p>The <em>newline</em> character at the end of a line (also EOL character) ensures that whatever comes after belonges to a new line. To avoid unwanted behavior, source scripts should always have an EOL character at the end of their last lines.</p>
<hr />

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Syntax.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
